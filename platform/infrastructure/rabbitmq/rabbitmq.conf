# ===========================================
# EduMind RabbitMQ Configuration
# Industry Best Practices Configuration
# ===========================================

# -----------------------------
# Networking
# -----------------------------
listeners.tcp.default = 5672
management.tcp.port = 15672

# Increase frame_max for better throughput
frame_max = 131072

# Connection heartbeat (60 seconds)
heartbeat = 60

# -----------------------------
# Security
# -----------------------------
# Disable default guest user for security
loopback_users.guest = false

# Password hashing
password_hashing_module = rabbit_password_hashing_sha256

# -----------------------------
# Resource Limits
# -----------------------------
# Memory threshold (70% of available RAM)
vm_memory_high_watermark.relative = 0.7

# Disk free limit (minimum 2GB)
disk_free_limit.absolute = 2GB

# Maximum number of channels per connection
channel_max = 2047

# Connection backlog
tcp_listen_options.backlog = 128

# -----------------------------
# Queue Settings
# -----------------------------
# Default queue type (quorum queues for durability)
default_queue_type = quorum

# Queue message TTL (24 hours default for unprocessed messages)
# This prevents queue buildup from stale messages

# -----------------------------
# Clustering
# -----------------------------
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
cluster_name = edumind-rabbitmq-cluster

# -----------------------------
# Management Plugin
# -----------------------------
management.rates_mode = basic

# -----------------------------
# Logging
# -----------------------------
log.file.level = info
log.console = true
log.console.level = info

# -----------------------------
# Prometheus Metrics
# -----------------------------
prometheus.return_per_object_metrics = true
